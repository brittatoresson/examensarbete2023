@page "/focus"
@using MudBlazor
@using Examensarbete.Client.Components
@inject Blazored.SessionStorage.ISessionStorageService sessionStorage

<MudPaper Class="focus" Elevation="0">

    @foreach (var item in focus)
    {

            <MudCard Class="focusCard" @onclick="(() => SetFocus(item))">@item.Name</MudCard>
    }

    @if (hasFocusArea)
    {
        <NavigationButton Url="timer" />
    }
</MudPaper>

@code {
    public class Focus
    {
        public string Name;
    }
    public bool hasFocusArea;

    List<Focus> focus = new();

    protected override void OnInitialized()
    {
        base.OnInitialized();
        focus.Add(new Focus { Name = "Intervall" });
        focus.Add(new Focus { Name = "Steady" });
        focus.Add(new Focus { Name = "Strength" });
        focus.Add(new Focus { Name = "Teknik" });
        focus.Add(new Focus { Name = "Uthållighet" });
    }

    public async Task SetFocus(Focus focus)
    {
        await sessionStorage.SetItemAsync("Focus", focus.Name);
        hasFocusArea = true;

    }
    public async Task GetSessionState()
    {
        var name = await sessionStorage.GetItemAsync<string>("Focus");
        //Focus myCustomObject = JsonConvert.DeserializeObject<Focus>(name);
    }
}
