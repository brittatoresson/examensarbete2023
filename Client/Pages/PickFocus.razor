@page "/focus"
@using MudBlazor
@using Examensarbete.Client.Components
@inject Blazored.SessionStorage.ISessionStorageService sessionStorage

<MudPaper Class="pageContainer" Elevation="0">

    @foreach (var item in setFocus)
    {

            <MudCard Class="@(item.IsActive ? "focusCard" :"activeExercise focusCard")" @onclick="(() => SetFocus(item))">@item.Name</MudCard>
    }

    @if (hasFocusArea)
    {
        <NavigationButton Url="timer" />
    }

</MudPaper>

@code {
    public class Focus
    {
        public string Name;
        public bool IsActive = false;
    }
    public bool hasFocusArea;

    List<Focus> setFocus = new();

    protected override void OnInitialized()
    {
        base.OnInitialized();
        setFocus.Add(new Focus { Name = "Interval", IsActive = false });
        setFocus.Add(new Focus { Name = "Steady", IsActive = false });
        setFocus.Add(new Focus { Name = "Strength", IsActive = false });
    }

    public async Task SetFocus(Focus focus)
    {
        focus.IsActive = !focus.IsActive;
        hasFocusArea = setFocus.Exists(x => x.IsActive == true);
        await sessionStorage.SetItemAsync("Focus", focus.Name);
    }
}
