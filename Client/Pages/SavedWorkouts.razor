@page "/saved-workout"
@using Examensarbete.Shared.Model;
@inject ExerciseService exerciseService;

<MudPaper Class="savedWorkouts">
    @foreach (var workout in exerciseService.WorkoutList)
    {
        <ul>
            <li><h3>@workout.Exercise</h3></li>
            <li>@workout.Focus</li>
            <li>@workout.Repetition reps</li>
            <li>@workout.Rounds rounds</li>
            <li>Total time: @workout.TotalTime min</li>
            <li>@workout.Date.Value.Date.ToShortDateString()</li>
            <MudButton OnClick="(() => Delete(workout.id))">delete</MudButton>
        </ul>
        <MudScrollToTop>
            <MudFab Color="Color.Tertiary" Icon="@Icons.Material.Filled.ArrowCircleUp" />
        </MudScrollToTop>

    }
</MudPaper>

@code {

    protected override async Task OnInitializedAsync()
    {
        base.OnInitializedAsync();
        await GetWorkout();
        return;
    }

    public async Task GetWorkout()
    {
        await exerciseService.GetWorkout();
        StateHasChanged();
    }

    public async void Delete(int? id)
    {
        await exerciseService.DeleteWorkout(id);
        GetWorkout();
    }

}
